SET foreign_key_checks = 0;

DROP TABLE IF EXISTS 티켓;
DROP TABLE IF EXISTS 사은품;
DROP TABLE IF EXISTS 회원정보;
DROP TABLE IF EXISTS 결제정보;
DROP TABLE IF EXISTS 공연정보;
DROP TABLE IF EXISTS 좌석;
DROP TABLE IF EXISTS 공연장소;
DROP TABLE IF EXISTS 공연;
DROP TABLE IF EXISTS 굿즈;
DROP TABLE IF EXISTS 회원;

SET foreign_key_checks = 1;


-- 테이블 재생성 및 데이터 삽입
CREATE TABLE 회원 (
  ID INT PRIMARY KEY,
  주소 VARCHAR(255),
  성별 VARCHAR(10),
  전화번호 VARCHAR(20),
  나이 INT
);

CREATE TABLE 회원정보 (
  정보수정 INT PRIMARY KEY,
  예매내역 VARCHAR(255),
  예매취소 VARCHAR(255),
  회원ID INT,
  FOREIGN KEY (회원ID) REFERENCES 회원(ID)
);

CREATE TABLE 결제정보 (
  예매번호 INT PRIMARY KEY,
  가격 DECIMAL(10, 2),
  결제수단 VARCHAR(50),
  회원ID INT,
  결제일 DATE,
  결제번호 INT,
  FOREIGN KEY (회원ID) REFERENCES 회원(ID)
);

CREATE TABLE 공연 (
  공연코드 INT PRIMARY KEY,
  제목 VARCHAR(255),
  장르 VARCHAR(50),
  등급 VARCHAR(10)
);

CREATE TABLE 굿즈 (
  주문번호 INT PRIMARY KEY,
  가격 DECIMAL(10, 2),
  굿즈종류 VARCHAR(50)
);

CREATE TABLE 사은품 (
  사은품코드 INT PRIMARY KEY,
  수량 INT,
  사은품종류 VARCHAR(50),
  공연코드 INT,
  FOREIGN KEY (공연코드) REFERENCES 공연(공연코드)
);

CREATE TABLE 티켓 (
  티켓번호 INT PRIMARY KEY,
  상영관번호 INT,
  예매번호 INT,
  좌석번호 INT,
  FOREIGN KEY (상영관번호) REFERENCES 공연(공연코드),
  FOREIGN KEY (예매번호) REFERENCES 결제정보(예매번호)
);

CREATE TABLE 공연장소 (
  공연소번호 INT PRIMARY KEY,
  공연이름 VARCHAR(255),
  지역 VARCHAR(100)
);

CREATE TABLE 좌석 (
  좌석번호 INT PRIMARY KEY,
  프리미엄석여부 BOOLEAN
);

CREATE TABLE 공연정보 (
  공연일정코드 INT PRIMARY KEY,
  사은품코드 INT,
  공연코드 INT,
  공연번호 INT,
  상영날짜 DATE,
  FOREIGN KEY (사은품코드) REFERENCES 사은품(사은품코드),
  FOREIGN KEY (공연코드) REFERENCES 공연(공연코드)
);

-- 데이터 삽입
INSERT INTO 회원 (ID, 주소, 성별, 전화번호, 나이) VALUES
(1, '서울시 강남구', '남', '010-1234-5678', 30),
(2, '서울시 서초구', '여', '010-2345-6789', 25),
(3, '부산시 해운대구', '남', '010-3456-7890', 28),
(4, '인천시 남동구', '여', '010-4567-8901', 22),
(5, '대구시 수성구', '남', '010-5678-9012', 35),
(6, '대전시 유성구', '여', '010-6789-0123', 27),
(7, '광주시 북구', '남', '010-7890-1234', 32),
(8, '울산시 중구', '여', '010-8901-2345', 29),
(9, '세종시 한솔동', '남', '010-9012-3456', 26),
(10, '경기도 성남시', '여', '010-0123-4567', 31);

INSERT INTO 회원정보 (정보수정, 예매내역, 예매취소, 회원ID) VALUES
(1, '공연1 예매', '공연2 취소', 1),
(2, '공연2 예매', NULL, 2),
(3, '공연3 예매', '공연1 취소', 3),
(4, '공연4 예매', NULL, 4),
(5, '공연5 예매', '공연3 취소', 5),
(6, '공연6 예매', NULL, 6),
(7, '공연7 예매', '공연4 취소', 7),
(8, '공연8 예매', NULL, 8),
(9, '공연9 예매', '공연5 취소', 9),
(10, '공연10 예매', NULL, 10);

INSERT INTO 공연 (공연코드, 제목, 장르, 등급) VALUES
(1, '뮤지컬1', '뮤지컬', 'A'),
(2, '콘서트1', '콘서트', 'B'),
(3, '연극1', '연극', 'C'),
(4, '뮤지컬2', '뮤지컬', 'A'),
(5, '콘서트2', '콘서트', 'B'),
(6, '연극2', '연극', 'C'),
(7, '뮤지컬3', '뮤지컬', 'A'),
(8, '콘서트3', '콘서트', 'B'),
(9, '연극3', '연극', 'C'),
(10, '뮤지컬4', '뮤지컬', 'A');

INSERT INTO 결제정보 (예매번호, 가격, 결제수단, 회원ID, 결제일, 결제번호) VALUES
(1, 50000, '카드', 1, '2024-01-01', 101),
(2, 60000, '현금', 2, '2024-01-02', 102),
(3, 70000, '카드', 3, '2024-01-03', 103),
(4, 80000, '현금', 4, '2024-01-04', 104),
(5, 90000, '카드', 5, '2024-01-05', 105),
(6, 100000, '현금', 6, '2024-01-06', 106),
(7, 110000, '카드', 7, '2024-01-07', 107),
(8, 120000, '현금', 8, '2024-01-08', 108),
(9, 130000, '카드', 9, '2024-01-09', 109),
(10, 140000, '현금', 10, '2024-01-10', 110);

INSERT INTO 굿즈 (주문번호, 가격, 굿즈종류) VALUES
(1, 10000, '티셔츠'),
(2, 15000, '모자'),
(3, 20000, '가방'),
(4, 25000, '포스터'),
(5, 30000, '앨범'),
(6, 35000, '스티커'),
(7, 40000, '키링'),
(8, 45000, '노트'),
(9, 50000, '펜'),
(10, 55000, '엽서');

INSERT INTO 사은품 (사은품코드, 수량, 사은품종류, 공연코드) VALUES
(1, 100, '포스터', 1),
(2, 200, '앨범', 2),
(3, 300, '티셔츠', 3),
(4, 400, '모자', 4),
(5, 500, '가방', 5),
(6, 600, '스티커', 6),
(7, 700, '키링', 7),
(8, 800, '노트', 8),
(9, 900, '펜', 9),
(10, 1000, '엽서', 10);

INSERT INTO 티켓 (티켓번호, 상영관번호, 예매번호, 좌석번호) VALUES
(3, 3, 3, 103),
(4, 4, 4, 104),
(5, 5, 5, 105),
(6, 6, 6, 106),
(7, 7, 7, 107),
(8, 8, 8, 108),
(9, 9, 9, 109),
(10, 10, 10, 110);

INSERT INTO 공연장소 (공연소번호, 공연이름, 지역) VALUES
(1, '세종문화회관', '서울'),
(2, '예술의전당', '서울'),
(3, 'LG아트센터', '서울'),
(4, '부산문화회관', '부산'),
(5, '대구오페라하우스', '대구'),
(6, '광주문화예술회관', '광주'),
(7, '대전예술의전당', '대전'),
(8, '울산문화예술회관', '울산'),
(9, '경기아트센터', '경기'),
(10, '강원도문화예술회관', '강원');

INSERT INTO 좌석 (좌석번호, 프리미엄석여부) VALUES
(101, TRUE),
(102, FALSE),
(103, TRUE),
(104, FALSE),
(105, TRUE),
(106, FALSE),
(107, TRUE),
(108, FALSE),
(109, TRUE),
(110, FALSE);

INSERT INTO 공연정보 (공연일정코드, 사은품코드, 공연코드, 공연번호, 상영날짜) VALUES
(1, 1, 1, 1, '2024-02-01'),
(2, 2, 2, 2, '2024-02-02'),
(3, 3, 3, 3, '2024-02-03'),
(4, 4, 4, 4, '2024-02-04'),
(5, 5, 5, 5, '2024-02-05'),
(6, 6, 6, 6, '2024-02-06'),
(7, 7, 7, 7, '2024-02-07'),
(8, 8, 8, 8, '2024-02-08'),
(9, 9, 9, 9, '2024-02-09'),
(10, 10, 10, 10, '2024-02-10');

